(function(a){a.fn.iframeOverlay=function(f){var k;var e=0;var j=a.extend({wrapper:"#embed-wrapper",wrapperTop:0,wrapperLeft:0,wrapperBottom:0,wrapperRight:0,defWidth:610,defHeight:712,overlay:"#overlay",closeOverlay:"#close-overlay",closeOverlayPos:"iframe-top-right",href:"",prevId:"#previous",nextId:"#next",nextHref:"",prevHref:"",dataItem:0,startDims:0,controls:".controls"},f);var g=0;var c=[];a(this).each(function(){a(this).attr("data-item",g);c[g]=a(this);g++});j.max=c.length-1;a(this).each(function(){a(this).on("click",function(){j.href=a(this).attr("href");j.dataItem=a(this).attr("data-item");handleOverlay();return false})});closeOverlay=function(){a(j.closeOverlay).on("click",function(){a(j.overlay).fadeOut(300)});a(j.overlay).on("click",function(){a(this).fadeOut(300)});a(j.nextId).css({display:"none"});a(j.prevId).css({display:"none"});d()};function d(){clearInterval(k)}showOverlay=function(){a(j.overlay).fadeIn(300);k=setInterval(function(){handleResize()},300)};handleResize=function(){bw=a("body").width();bh=a("body").height();currDims=bw*bh;if(currDims!=j.startDims){a(j.controls).hide();sizeWrapper()}};sizeWrapper=function(){bw=a("body").width();bh=a("body").height();j.startDims=bw*bh;j.wrapperWidth=(bw>j.defWidth)?j.defWidth:bw;j.defHeight=j.wrapperWidth+100;j.wrapperHeight=(bh>j.defHeight)?j.defHeight:bh+100;a(j.overlay).css({width:"100%","min-height":"100%"});j.wrapperWidth*=0.85;j.wrapperHeight*=0.85;a(j.wrapper).animate({width:j.wrapperWidth,height:j.wrapperHeight},1,function(){positionWrapper()})};positionWrapper=function(){w=a(j.wrapper).width();h=a(j.wrapper).height();bw=a("body").width();bh=a("body").height();t=((bh-h)>0)?(bh-h)/2:0;l=((bw-w)>0)?(bw-w)/2:0;a(j.wrapper).animate({"margin-top":t,"margin-left":l},1,function(){j.wrapperTop=t;j.wrapperLeft=l;j.wrapperBottom=t+j.wrapperHeight;j.wrapperRight=l+j.wrapperWidth;setTimeout(function(){positionPrevNext();positionCloseOverlay()},900)})};positionPrevNext=function(){bh=a("body").height();bw=a("body").width();j.defHeight=w+100;h=a(j.nextId).height();t=(bh-h)/2;l=((bw-j.wrapperWidth)/2)-(h*1);if(l<(h*2)){l=h*2}a(j.nextId).css({display:"block",position:"absolute",top:t,left:l});a(j.prevId).css({display:"block",position:"absolute",top:t,right:l})};positionCloseOverlay=function(){switch(j.closeOverlayPos){default:clsHeight=a(j.closeOverlay).height();clsT=j.wrapperTop-(clsHeight*0.5);clsL=j.wrapperLeft+j.wrapperWidth-(clsHeight*0.4);a(j.closeOverlay).animate({top:clsT,left:clsL},1,function(){a(j.controls).fadeIn(300)});break}};newIframe=function(){html='<iframe src="'+j.href+'" frameborder="0" scrolling="no" allowtransparency="true" onload=""></iframe>';a(j.wrapper).html(html);return false};function b(){a(j.wrapper).fadeIn(1300)}prevNextHandler=function(){a(j.nextId).on("click",function(){j.dataItem--;if(j.dataItem<0){j.dataItem=(c.length-1)}j.href=a(c[j.dataItem]).attr("href");newIframe();return false});a(j.prevId).on("click",function(){j.dataItem++;if(j.dataItem>(c.length-1)){j.dataItem=0}j.href=a(c[j.dataItem]).attr("href");newIframe();return false})};handleOverlay=function(m){var i;sizeWrapper();closeOverlay();newIframe();showOverlay()};prevNextHandler();a("body").on("scroll",function(){})}})(jQuery);